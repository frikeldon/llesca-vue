!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],t):"object"==typeof exports?exports.llescaVue=t(require("Vue")):e.llescaVue=t(e.Vue)}(self,(function(e){return(()=>{"use strict";var t={407:(e,t)=>{t.Z=(e,t)=>{const a=e.__vccOpts||e;for(const[e,l]of t)a[e]=l;return a}},740:t=>{t.exports=e}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var o=a[e]={exports:{}};return t[e](o,o.exports,l),o.exports}l.d=(e,t)=>{for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};return(()=>{l.d(n,{default:()=>te});var e=l(740);const t={key:0,class:"llesca-cell llesca-header"},a=(e,t)=>{t.arg.htmlify?e.innerHTML=t.arg.htmlify(t.value):t.arg.stringify?e.textContent=t.arg.stringify(t.value):Array.isArray(t.value)?e.textContent=t.value.join(", "):e.textContent=t.value};function o(e,t){for(let a=e.length-1;a>=0;a-=1)if(t(e[a],a,e))return a;return-1}function i(e,t,a){const l=[],n=Math.max(e.length,t.length);for(let o=0;o<n;o+=1)l.push(a(e[o],t[o],o,e,t));return l}function r(e,t,a,l){const n=a+l;for(let l=a;l<n;l+=1){const a=e[l],n=t[l];if(a instanceof Date&&n instanceof Date){if(a.getTime()!==n.getTime())return!1}else if(a!==n)return!1}return!0}const d={name:"LlescaBaseListView",directives:{content:a},props:{columns:{type:Array,required:!0},rows:{type:Array,required:!0},groups:{type:Array,default:()=>[]},selectedIndices:{type:Array,default:()=>[]},autoLayout:{type:String,default:null},compact:{type:Boolean,default:!1},selection:{type:String,default:""},pageSize:{type:Number,default:null,validator:e=>null===e||Number.isInteger(e)&&e>0},currentPage:{type:Number,default:0,validator:e=>null===e||Number.isInteger(e)&&e>=0},dataCount:{type:Number,default:null,validator:e=>null===e||Number.isInteger(e)&&e>=0},paginationPosition:{type:String,default:"bottomCenter",validator:e=>["topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","none"].includes(e)}},emits:["update:selectedIndices","clickHeader","clickCell","update:currentPage"],computed:{isPaginated(){return"number"==typeof this.pageSize&&"number"==typeof this.dataCount},totalPages(){const{pageSize:e,dataCount:t}=this;return Math.ceil(t/e)},containerClass(){switch(this.paginationPosition){case"topLeft":case"topCenter":case"topRight":return"llesca-navTop";case"bottomLeft":case"bottomCenter":case"bottomRight":return"llesca-navBottom";default:return}},paginationClass(){switch(this.paginationPosition){case"topLeft":case"bottomLeft":return"llesca-left";case"topCenter":case"bottomCenter":return"llesca-center";case"topRight":case"bottomRight":return"llesca-right";default:return}},currentGroups(){const{groups:e,rows:t}=this;return e.filter((e=>0===e.level||t.findIndex((t=>r(t,e.row,0,e.level)))>=0))}},methods:{goToPage(e){this.isPaginated&&e>=0&&e<this.totalPages&&this.$emit("update:currentPage",e)},handleGoTo(e){const t=Number(e);!isNaN(t)&&t>0&&t<=this.totalPages&&this.goToPage(t-1)},getAggregateTransformations:e=>"object"==typeof e?.aggregate?e.aggregate:e}};var s=l(407);const u=(0,s.Z)(d,[["render",function(a,l,n,o,i,r){const d=(0,e.resolveComponent)("fura-details-list"),s=(0,e.resolveComponent)("fura-spin-nav"),u=(0,e.resolveDirective)("content");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{class:(0,e.normalizeClass)(r.containerClass)},[(0,e.createVNode)(d,{class:"llesca-listView","without-group-header":"",columns:n.columns,data:n.rows,groups:r.currentGroups,"selected-indices":n.selectedIndices,"auto-layout":n.autoLayout,compact:n.compact,selection:n.selection,"onUpdate:selectedIndices":l[0]||(l[0]=e=>a.$emit("update:selectedIndices",e)),onClickHeader:l[1]||(l[1]=e=>a.$emit("clickHeader",e)),onClickCell:l[2]||(l[2]=e=>a.$emit("clickCell",e))},{default:(0,e.withCtx)((t=>[(0,e.createCommentVNode)("\n        @slot Contenido de una celda.\n        @binding {number} rowIndex Índice de la fila.\n        @binding {number} columnIndex Índice de la definición de la columna.\n        @binding {string} content Contenido de la celda.\n        @binding {object} column Referencia a la definición de la columna.\n      "),(0,e.renderSlot)(a.$slots,"default",{rowIndex:t.rowIndex,columnIndex:t.columnIndex,content:t.content,column:t.column},(()=>[(0,e.withDirectives)((0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["llesca-cell",{"llesca-grouped":t.column.grouped}])},null,2),[[u,t.content,t.column.property]])]),!0)])),header:(0,e.withCtx)((t=>[(0,e.createCommentVNode)("\n        @slot Contenido de una cabecera.\n        @binding {object} column Referencia a la definición de la columna.\n        @binding {number} index Índice de la definición de la columna.\n      "),(0,e.renderSlot)(a.$slots,"header",{column:t.column,index:t.index},void 0,!0)])),bodyHeader:(0,e.withCtx)((l=>[(0,e.createCommentVNode)("\n        @slot Contenido de una celda de un encabezado de cuerpo.\n        @binding {number} groupIndex Índice de la definición del grupo.\n        @binding {object} group Referencia a la definición del grupo.\n        @binding {number} columnIndex Índice de la definición de la columna.\n        @binding {object} column Referencia a la definición de la columna.\n        @binding {Array} data Datos del grupo.\n      "),(0,e.renderSlot)(a.$slots,"bodyHeader",{groupIndex:l?.groupIndex,group:l?.group,columnIndex:l?.columnIndex,column:l?.column,data:l?.data},(()=>[n.groups.length>0?(0,e.withDirectives)(((0,e.openBlock)(),(0,e.createElementBlock)("div",t,null,512)),[[u,l?.group?.row[l.columnIndex],r.getAggregateTransformations(l?.column?.property)]]):(0,e.createCommentVNode)("v-if",!0)]),!0)])),_:3},8,["columns","data","groups","selected-indices","auto-layout","compact","selection"]),r.isPaginated&&r.containerClass&&r.paginationClass&&n.rows.length>0?((0,e.openBlock)(),(0,e.createBlock)(s,{key:0,class:(0,e.normalizeClass)(["llesca-navigation",r.paginationClass]),current:n.currentPage+1,total:r.totalPages,"end-button":"","start-button":"",editable:"","disable-prev":n.currentPage<=0,"disable-next":n.currentPage+1>=r.totalPages,"disable-start":n.currentPage<=0,"disable-end":n.currentPage+1>=r.totalPages,onPrev:l[3]||(l[3]=e=>r.goToPage(n.currentPage-1)),onNext:l[4]||(l[4]=e=>r.goToPage(n.currentPage+1)),onStart:l[5]||(l[5]=e=>r.goToPage(0)),onEnd:l[6]||(l[6]=e=>r.goToPage(r.totalPages-1)),onGoTo:r.handleGoTo},null,8,["class","current","total","disable-prev","disable-next","disable-start","disable-end","onGoTo"])):(0,e.createCommentVNode)("v-if",!0)],2)}],["__scopeId","data-v-5dac9ed0"]]),c=t=>((0,e.pushScopeId)("data-v-52222d1a"),t=t(),(0,e.popScopeId)(),t),p={class:"list-view-fields"},m=c((()=>(0,e.createElementVNode)("div",null,null,-1))),g={class:"list-view-fields"},f=c((()=>(0,e.createElementVNode)("div",{class:"list-view-orderBy"},null,-1))),y={key:0,class:"llesca-item"},h={class:"llesca-content"},b=["onDragstart"],v={class:"llesca-handler"},x={key:1,class:"llesca-item"},w={class:"llesca-content"},V="text/llesca-key",S={name:"LlescaStackDraggable",props:{name:{type:String,default:()=>String(Math.random())},primaryKey:{type:String,required:!0},modelValue:{type:Array,required:!0},handlerPosition:{type:String,default:"center",validate:e=>!e||["top","center","bottom"].includes(e)}},emits:["update:modelValue"],data:()=>({currentY:null,refElements:[]}),computed:{hasHeaderSlots(){return this.$slots.header&&-1!==this.$slots.header().findIndex((e=>e.type!==Comment))},hasFooterSlots(){return this.$slots.footer&&-1!==this.$slots.footer().findIndex((e=>e.type!==Comment))}},methods:{getItemHeights(){const e=[];let t=0;for(const{item:a,index:l,el:n}of this.refElements){const o=n.getBoundingClientRect(),{width:i}=o;t+=i,e.push({item:a,index:l,width:i,accumulatedWidth:t})}return e},handleDragStart(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.droptAllowed="move",e.dataTransfer.setData(V+this.name,t)},handleDragOver(e){e.dataTransfer.types.includes(V+this.name)&&e.preventDefault()},handleDrop(e){const t=e.dataTransfer.getData(V+this.name),a=this.modelValue.findIndex((e=>e[this.primaryKey]===t)),l=this.refElements.filter((e=>e.el)).reduce(((t,a)=>a.el.getBoundingClientRect().bottom>e.pageY&&a.index<t?a.index:t),this.refElements.length);var n,o,i;this.$emit("update:modelValue",(n=this.modelValue,(o=a)===(i=l)?n:o>i?[...n.slice(0,i),n[o],...n.slice(i,o),...n.slice(o+1)]:[...n.slice(0,o),...n.slice(o+1,i+1),n[o],...n.slice(i+1)]))}},beforeUpdate(){this.refElements=[]}},$=(0,s.Z)(S,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-icon");return(0,e.openBlock)(),(0,e.createElementBlock)("div",{onDragover:a[3]||(a[3]=(...e)=>i.handleDragOver&&i.handleDragOver(...e)),onDrop:a[4]||(a[4]=(...e)=>i.handleDrop&&i.handleDrop(...e))},[i.hasHeaderSlots?((0,e.openBlock)(),(0,e.createElementBlock)("div",y,[(0,e.createVNode)(r,{class:"llesca-dragIcon"}),(0,e.createElementVNode)("div",h,[(0,e.renderSlot)(t.$slots,"header",{},void 0,!0)])])):(0,e.createCommentVNode)("v-if",!0),((0,e.openBlock)(!0),(0,e.createElementBlock)(e.Fragment,null,(0,e.renderList)(l.modelValue,((n,d)=>((0,e.openBlock)(),(0,e.createElementBlock)("div",{key:n[l.primaryKey],ref_for:!0,ref:e=>o.refElements.push({item:n,index:d,el:e}),draggable:"true",class:"llesca-item",onDragstart:(0,e.withModifiers)((e=>i.handleDragStart(e,n.key)),["stop"])},[(0,e.createElementVNode)("div",v,[(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["llesca-cover",{"llesca-hide":"top"===l.handlerPosition}]),draggable:"true",onDragstart:a[0]||(a[0]=(0,e.withModifiers)((()=>{}),["stop","prevent"]))},null,34),(0,e.createVNode)(r,{class:"llesca-dragIcon",name:"GripperDotsVertical"}),(0,e.createElementVNode)("div",{class:(0,e.normalizeClass)(["llesca-cover",{"llesca-hide":"bottom"===l.handlerPosition}]),draggable:"true",onDragstart:a[1]||(a[1]=(0,e.withModifiers)((()=>{}),["stop","prevent"]))},null,34)]),(0,e.createElementVNode)("div",{class:"llesca-content",draggable:"true",onDragstart:a[2]||(a[2]=(0,e.withModifiers)((()=>{}),["stop","prevent"]))},[(0,e.renderSlot)(t.$slots,"default",{item:n,key:d[l.primaryKey],index:d},void 0,!0)],32)],40,b)))),128)),i.hasFooterSlots?((0,e.openBlock)(),(0,e.createElementBlock)("div",x,[(0,e.createVNode)(r,{class:"llesca-dragIcon"}),(0,e.createElementVNode)("div",w,[(0,e.renderSlot)(t.$slots,"footer",{},void 0,!0)])])):(0,e.createCommentVNode)("v-if",!0)],32)}],["__scopeId","data-v-23432e2b"]]),k={name:"LlescaConfigListViewSimple",components:{"llesca-stack-draggable":$},props:{fields:{type:Array,required:!0},modelValue:{type:Array,default:()=>[]}},emits:["update:modelValue"],computed:{fieldOptions(){const{modelValue:e,fields:t}=this,a=t.map((t=>({value:t.key,text:t.label,disabled:e.some((e=>e.key===t.key))})));return[{value:null,text:"",disabeld:!1},...a]}},methods:{addNewItem(e){e&&this.$emit("update:modelValue",[...this.modelValue,{key:e,direction:null}])},updateKey(e,t){const a=[...this.modelValue];t?a[e]={key:t,direction:a[e].direction}:a.splice(e,1),this.$emit("update:modelValue",a)},updateDirection(e,t){const a=[...this.modelValue];a[e]={key:a[e].key,direction:t},this.$emit("update:modelValue",a)},getOrderByOptions(e){const t=this.fields.find((t=>t.key===e));return t&&t.orderby?t.orderby:[{value:"asc",text:"A -> Z"},{value:"desc",text:"Z -> A"}]}}},B=(0,s.Z)(k,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-dropdown"),d=(0,e.resolveComponent)("llesca-stack-draggable");return(0,e.openBlock)(),(0,e.createBlock)(d,{"primary-key":"key","model-value":l.modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e))},{default:(0,e.withCtx)((t=>[(0,e.createElementVNode)("div",p,[(0,e.createVNode)(r,{class:"list-view-field",options:i.fieldOptions,"model-value":t.item.key,"onUpdate:modelValue":e=>i.updateKey(t.index,e)},null,8,["options","model-value","onUpdate:modelValue"]),(0,e.createVNode)(r,{class:"list-view-orderBy",options:i.getOrderByOptions(t.item.key),"model-value":t.item.direction,"onUpdate:modelValue":e=>i.updateDirection(t.index,e)},null,8,["options","model-value","onUpdate:modelValue"]),m])])),footer:(0,e.withCtx)((()=>[(0,e.createElementVNode)("div",g,[(0,e.createVNode)(r,{class:"list-view-field",options:i.fieldOptions,"onUpdate:modelValue":i.addNewItem},null,8,["options","onUpdate:modelValue"]),f])])),_:1},8,["model-value"])}],["__scopeId","data-v-52222d1a"]]),C={name:"LlescaForm",props:{validator:{type:Function,default:()=>null}},emits:["change"],data:()=>({fields:new Map}),methods:{async checkErrors(e){const t=Array.from(this.fields.entries()),a=await Promise.all(t.map((t=>t[1].field.validate?.(e)))),l=[];let n=!0;for(let e=0;e<a.length;e+=1)a[e]||(n=!1,l.push(t[e][0]));const o=await this.validator(this.getValues(),e);return n&&!o?null:{form:o,fields:l}},getValues(){const e=Array.from(this.fields.entries()).map((([e,{field:t}])=>[e,t.modelValue]));return Object.fromEntries(e)},updateValues(e){for(const t in e){const a=this.fields.get(t);a&&a.updateValue(e[t])}},loadData(){return Promise.all(this.fields.entries().map((([,{field:e}])=>e.loadData?.())))},registerField(e,t){if(e&&"string"==typeof e){this.fields.has()&&console.warn(`Field '${e}' is already registered in the collection`);const a=t.$watch("modelValue",((t,a)=>{this.$emit("change",{name:e,newValue:t,oldValue:a})}));this.fields.set(e,{field:t,unwatch:a})}else console.error("Invalid field.")},unregisterField(e){if(this.fields.has(e)){const{unwatch:t}=this.fields.get(e);t(),this.fields.delete(e)}else console.warn(`Field '${e}' not found in the collection`)}}},I=(0,s.Z)(C,[["render",function(t,a,l,n,o,i){return(0,e.renderSlot)(t.$slots,"default")}]]);function P(e,t){if(null!==e){const a=function(e,t){let a=t;for(;a;){if(a.$.type===e)return a;a=a.$parent}return null}(I,t.$parent);if(a)return a.registerField(e,t),a}return null}function D(e,t){t.form&&t.form.unregisterField(e)}const T={props:{name:{type:String,default:null},modelValue:{type:null,default:void 0},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue"],data:()=>({form:null}),computed:{rawValue(){const{modelValue:e,dataType:t,dataTypeProp:a}=this;return t&&e instanceof t?e[a]:e}},methods:{updateValue(e){if(this.dataType){const t=this.dataType;this.$emit("update:modelValue",new t(e))}else this.$emit("update:modelValue",e)}},watch:{name(e,t){D(t,this),this.form=P(e,this)}},mounted(){this.form=P(this.name,this)},beforeUnmount(){D(this.name,this),this.form=null}},N={name:"LlescaFieldCheckbox",mixins:[T],props:{name:{type:String,default:null},modelValue:{type:[Boolean,Object],default:null},nullable:{type:Boolean,default:!1},label:{type:String,default:""},boxSide:{type:String,default:"start",validator:e=>!e||["start","end"].includes(e)},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue","update:indeterminate"],data:()=>({errorMessage:""}),computed:{rawIndeterminate(){const{nullable:e,rawValue:t}=this;return e&&null==t}},methods:{async validate(e={}){this.errorMessage="";const t=await this.validator(this.modelValue,e);return!t||(this.errorMessage=t,!1)},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}},A=(0,s.Z)(N,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-checkbox");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",indeterminate:i.rawIndeterminate,label:l.label,"box-side":l.boxSide,disabled:l.disabled,readonly:l.readonly,"model-value":t.rawValue,"onUpdate:modelValue":i.handleUpdateModelValue},null,8,["indeterminate","label","box-side","disabled","readonly","model-value","onUpdate:modelValue"])}]]),F={name:"LlescaFieldCombo",mixins:[T],props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},options:{type:Array,required:!0},modelValue:{type:void 0,default:null},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowFreeform:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},accentInsensitive:{type:Boolean,default:!1},placeholder:{type:String,default:null},immediateScroll:{type:Boolean,default:!1},hideCheckbox:{type:Boolean,default:!1},maxSelectedOptions:{type:Number,default:-1},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue","click","focus","blur","keydown"],data:()=>({errorMessage:""}),computed:{rawValue(){const{dataType:e,dataTypeProp:t,multiple:a,modelValue:l}=this;return e?a?l?.map((a=>a instanceof e?a[t]:a)):l instanceof e?l[t]:l:l}},methods:{async validate(e={}){if(this.errorMessage="",!e.ignoreAll&&!e.ignoreRequired&&this.required&&!this.rawValue)return this.errorMessage=e.requiredMessage??"Aquest camp es requerit.",!1;const t=await this.validator(this.modelValue,e);return!t||(this.errorMessage=t,!1)},updateValue(e){if(this.dataType){const t=this.dataType;if(this.multiple){const a=e.map((e=>{const a=this.options.find((t=>t.value===e));return new t(e,a?.text)}));this.$emit("update:modelValue",a)}else{const a=this.options.find((t=>t.value===e)),l=new t(e,a?.text);this.$emit("update:modelValue",l)}}else this.$emit("update:modelValue",e);this.errorMessage=""},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}},M=(0,s.Z)(F,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-combo-box");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,options:l.options,readonly:l.readonly,multiple:l.multiple,"allow-freeform":l.allowFreeform,"auto-complete":l.autoComplete,"accent-insensitive":l.accentInsensitive,placeholder:l.placeholder,"immediate-scroll":l.immediateScroll,"hide-checkbox":l.hideCheckbox,"max-selected-options":l.maxSelectedOptions,"error-message":o.errorMessage,"model-value":i.rawValue,"onUpdate:modelValue":i.handleUpdateModelValue,onClick:a[0]||(a[0]=e=>t.$emit("click")),onFocus:a[1]||(a[1]=e=>t.$emit("focus",e)),onBlur:a[2]||(a[2]=e=>t.$emit("blur",e)),onKeydown:a[3]||(a[3]=e=>t.$emit("keydown",e))},null,8,["label","description","invalid","disabled","required","borderless","underlined","options","readonly","multiple","allow-freeform","auto-complete","accent-insensitive","placeholder","immediate-scroll","hide-checkbox","max-selected-options","error-message","model-value","onUpdate:modelValue"])}]]),q={name:"LlescaFieldComboAsync",mixins:[T],props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},getOptions:{type:Function,required:!0},getOptionsWait:{type:Number,default:0},filterOptions:{type:Boolean,default:!1},modelValue:{type:void 0,default:void 0},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},accentInsensitive:{type:Boolean,default:!1},placeholder:{type:String,default:null},immediateScroll:{type:Boolean,default:!1},maxSelectedOptions:{type:Number,default:-1},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"},dataTypePropText:{type:[String,Symbol],default:"text"}},emits:["update:modelValue","click","focus","blur","keydown"],data:()=>({errorMessage:""}),computed:{rawValue(){const{dataType:e,dataTypeProp:t,dataTypePropText:a,multiple:l,modelValue:n}=this;return e?l?n?.map((l=>l instanceof e?{value:l[t],text:l[a]}:l)):n instanceof e?{value:n[t],text:n[a]}:n:n}},methods:{async validate(e={}){if(this.errorMessage="",!e.ignoreAll&&!e.ignoreRequired&&this.required&&0===this.rawValue.length)return this.errorMessage=e.requiredMessage??"Aquest camp es requerit.",!1;const t=await this.validator(this.modelValue,e);return!t||(this.errorMessage=t,!1)},updateValue(e){if(this.dataType){const t=this.dataType;if(this.multiple){const a=e.map((e=>new t(e.value,e.text)));this.$emit("update:modelValue",a)}else if(null==e)this.$emit("update:modelValue",null);else{const a=new t(e.value,e.text);this.$emit("update:modelValue",a)}}else this.$emit("update:modelValue",e);this.errorMessage=""},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}},j=(0,s.Z)(q,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-combo-box-async");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,readonly:l.readonly,multiple:l.multiple,"auto-complete":l.autoComplete,"accent-insensitive":l.accentInsensitive,placeholder:l.placeholder,"immediate-scroll":l.immediateScroll,"max-selected-options":l.maxSelectedOptions,"error-message":o.errorMessage,"model-value":i.rawValue,"get-options":l.getOptions,"get-options-wait":l.getOptionsWait,"filter-options":l.filterOptions,"onUpdate:modelValue":i.handleUpdateModelValue,onClick:a[0]||(a[0]=e=>t.$emit("click")),onFocus:a[1]||(a[1]=e=>t.$emit("focus",e)),onBlur:a[2]||(a[2]=e=>t.$emit("blur",e)),onKeydown:a[3]||(a[3]=e=>t.$emit("keydown",e))},null,8,["label","description","invalid","disabled","required","borderless","underlined","readonly","multiple","auto-complete","accent-insensitive","placeholder","immediate-scroll","max-selected-options","error-message","model-value","get-options","get-options-wait","filter-options","onUpdate:modelValue"])}]]),O={name:"LlescaFieldDate",mixins:[T],props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},placeholder:{type:String,default:null},notWritable:{type:Boolean,default:!1},days:{type:Array,default:()=>["d","l","m","x","j","v","s"],validator:e=>7===e.length&&e.every((e=>"string"==typeof e))},months:{type:Array,default:()=>["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],validator:e=>12===e.length&&e.every((e=>"string"==typeof e))},goToday:{type:String,default:""},firstDayOfTheWeek:{type:Number,default:1,validator:e=>Number.isInteger(e)&&e>=0&&e<=6},today:{type:Date,default:()=>new Date},modelValue:{type:[Date,Object],default:null},parse:{type:Function,default:e=>{const[,t,a,l]=e.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/)||[];return t&&a&&l?new Date(Number(l),Number(a)-1,Number(t)):null}},formatify:{type:Function,default:null},stringify:{type:Function,default:e=>{const t=(e,t=2)=>e.toString().padStart(t,"0");return`${t(e.getDate())}/${t(e.getMonth()+1)}/${t(e.getFullYear(),4)}`}},min:{type:Date,default:null},max:{type:Date,default:null},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue","focus","blur"],data:()=>({errorMessage:""}),methods:{async validate(){if(!this.disabled){if(this.errorMessage="",this.required&&!this.rawValue)return this.errorMessage="Aquest camp es requerit.",!1;if(this.modelValue){if(this.min&&this.min.getTime()>this.rawValue.getTime())return this.errorMessage=`El valor mínim es ${this.min}.`,!1;if(this.max&&this.max.getTime()<this.rawValue.getTime())return this.errorMessage=`El valor màxim es ${this.max}.`,!1}const e=await this.validator(this.modelValue);if(e)return this.errorMessage=e,!1}return!0},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}};async function L(e,t,a={}){const l=function(e,t={}){const a=Array.isArray(e)?e.reduce(((e,t)=>{if(null==t)return e;const a=e.endsWith("/"),l=t.startsWith("/");return a&&l?e+t.substr(1):a||l?e+t:e+"/"+t})):e,l=new URL(a);for(const e in t)null!=t[e]&&l.searchParams.append(e,t[e]);return l}(e,t),n={headers:{Accept:"application/json",...a}},o=await fetch(l,n);if(o.ok)return await o.json();throw 400===o.status?await o.json():new Error}const U={name:"LlescaFieldDictionary",mixins:[T],components:{"llesca-field-combo":M},props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},modelValue:{type:void 0,default:null},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},allowFreeform:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},accentInsensitive:{type:Boolean,default:!1},placeholder:{type:String,default:null},immediateScroll:{type:Boolean,default:!1},hideCheckbox:{type:Boolean,default:!1},maxSelectedOptions:{type:Number,default:-1},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"},endPoint:{type:String,required:!0},keyValue:{type:String,required:!0},keyText:{type:String,required:!0},filter:{type:[String,Object],default:null},orderDirection:{type:String,default:null,validator:e=>!e||["asc","desc"].includes(e)},hasEmptyValue:{type:Boolean,default:!1},headers:{type:Object,default:()=>{}}},emits:["update:modelValue","click","focus","blur","keydown"],data:()=>({options:[]}),computed:{rawValue(){return this.$refs.field?.rawValue}},methods:{validate(e){return this.$refs.field.validate(e)},async loadData(){const e=(await L(this.endPoint,{$select:`${this.keyValue},${this.keyText}`,$filter:this.filter??void 0,$orderby:this.orderDirection?"desc"===this.orderDirection?`${this.keyText} desc`:`${this.keyText} asc`:void 0},this.headers)).value.map((e=>({value:e[this.keyValue],text:e[this.keyText]})));this.options=this.hasEmptyValue?[{value:void 0,text:""},...e]:e,this.options.some((e=>e.value===this.modelValue))||this.$emit("update:modelValue",null)},updateValue(e){return this.$refs.updateValue(e)}}},E={name:"LlescaFieldDictionaryAsync",mixins:[T],components:{"llesca-field-combo-async":j},props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},getOptionsWait:{type:Number,default:0},filterOptions:{type:Boolean,default:!1},modelValue:{type:void 0,default:void 0},readonly:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},autoComplete:{type:Boolean,default:!1},accentInsensitive:{type:Boolean,default:!1},placeholder:{type:String,default:null},immediateScroll:{type:Boolean,default:!1},maxSelectedOptions:{type:Number,default:-1},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"},endPoint:{type:String,required:!0},keyValue:{type:String,required:!0},keyText:{type:String,required:!0},filter:{type:[String,Object],default:null},orderDirection:{type:String,default:null,validator:e=>!e||["asc","desc"].includes(e)},hasEmptyValue:{type:Boolean,default:!1},headers:{type:Object,default:()=>{}}},emits:["update:modelValue","click","focus","blur","keydown"],data:()=>({options:[],errorMessage:""}),computed:{rawValue(){return this.$refs.field?.rawValue}},methods:{validate(e={}){return this.$refs.field.validate(e)},updateValue(e){return this.$refs.updateValue(e)},async getOptions(e){const t=`startswith(${this.keyText},'${e.replace("'","''")}')`;return(await L(this.endPoint,{$select:`${this.keyValue},${this.keyText}`,$filter:this.filter?`${this.filter} and ${t}`:t,$orderby:this.orderDirection?"desc"===this.orderDirection?`${this.keyText} desc`:`${this.keyText} asc`:void 0},this.headers)).value.map((e=>({value:e[this.keyValue],text:e[this.keyText]})))}}},R={name:"LlescaFieldNumber",mixins:[T],props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},placeholder:{type:String,default:null},prefix:{type:String,default:""},suffix:{type:String,default:""},multiline:{type:Boolean,default:!1},icon:{type:String,default:""},readonly:{type:Boolean,default:!1},maxlength:{type:Number,default:-1},unresizable:{type:Boolean,default:!1},autoAdjustHeight:{type:Boolean,default:!1},modelValue:{type:[Number,Object],default:null},formatStyle:{type:String,default:"decimal",validator:e=>["decimal","currency","percent","unit"].includes(e)},useGrouping:{type:Boolean,default:!1},minimumIntegerDigits:{type:Number,default:1,validator:e=>Number.isInteger(e)&&e>=1&&e<=21},minimumFractionDigits:{type:Number,default:0,validator:e=>Number.isInteger(e)&&e>=0&&e<=20},maximumFractionDigits:{type:Number,default:20,validator:e=>Number.isInteger(e)&&e>=0&&e<=20},minimumSignificantDigits:{type:Number,default:0,validator:e=>Number.isInteger(e)&&e>=0&&e<=21},maximumSignificantDigits:{type:Number,default:0,validator:e=>Number.isInteger(e)&&e>=0&&e<=21},parse:{type:Function,default:void 0},stringify:{type:Function,default:void 0},formatify:{type:Function,default:void 0},align:{type:String,default:"left",validator:e=>["left","center","right"].includes(e)},alignFocus:{type:String,default:"left",validator:e=>["left","center","right"].includes(e)},min:{type:Number,default:null},max:{type:Number,default:null},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue","click","focus","blur"],data:()=>({errorMessage:""}),methods:{async validate(){if(!this.disabled){if(this.errorMessage="",this.required&&!this.rawValue)return this.errorMessage="Aquest camp es requerit.",!1;if(this.modelValue){if(null!==this.min&&this.min>this.rawValue)return this.errorMessage=`El valor mínim es ${this.min}.`,!1;if(null!==this.max&&this.max<this.rawValue)return this.errorMessage=`El valor màxim es ${this.max}.`,!1}const e=await this.validator(this.modelValue);if(e)return this.errorMessage=e,!1}return!0},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}},z={name:"LlescaFieldText",mixins:[T],props:{name:{type:String,default:null},label:{type:String,default:""},description:{type:String,default:""},invalid:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},underlined:{type:Boolean,default:!1},placeholder:{type:String,default:null},prefix:{type:String,default:""},suffix:{type:String,default:""},multiline:{type:Boolean,default:!1},icon:{type:String,default:""},readonly:{type:Boolean,default:!1},maxlength:{type:Number,default:null},unresizable:{type:Boolean,default:!1},autoAdjustHeight:{type:Boolean,default:!1},modelValue:{type:[String,Object],default:null},pattern:{type:RegExp,default:null},validator:{type:Function,default:()=>null},dataType:{type:Function,default:null},dataTypeProp:{type:[String,Symbol],default:"value"}},emits:["update:modelValue","click","focus","blur","keydown"],data:()=>({errorMessage:""}),methods:{async validate(e={}){if(this.errorMessage="",this.modelValue){if(!e.ignoreAll&&!e.ignoreMaxlength&&null!==this.maxlength&&this.modelValue.length>this.maxlength)return this.errorMessage=e.maxlengthMessage??`La longitud màxima es de ${this.maxlength} caracters.`,!1;if(!e.ignoreAll&&!e.ignorePattern&&this.pattern&&!this.modelValue.match(this.pattern))return this.errorMessage=e.patternMessage??"El valor del text no compleix el patró especificat.",!1}else if(!e.ignoreAll&&!e.ignoreRequired&&this.required)return this.errorMessage=e.requiredMessage??"Aquest camp es requerit.",!1;const t=await this.validator(this.modelValue,e);return!t||(this.errorMessage=t,!1)},handleUpdateModelValue(e){this.updateValue(e),this.errorMessage=""}}};async function H({endPoint:e,groupedProperties:t,properties:a,orderby:l,filter:n,pageSize:o,currentPage:i,headers:r}){const d=t.map((e=>e.path||e.$select)).join(),s=a.map(((e,t)=>{switch(typeof e.aggregate){case"string":return`${e.aggregate} as ${K(t)}`;case"object":return`${e.aggregate.expression} as ${K(t)}`;default:return}})).filter((e=>e)).join(),u=d?s?`groupby((${d}), aggregate(${s}))`:`groupby((${d}))`:s?`aggregate(${s})`:"",c=n?u?`filter(${n})/${u}`:`filter(${n})`:u||void 0,p=l?.filter((e=>["asc","desc"].includes(e.direction))).map((e=>`${e.sentence} ${e.direction}`)).join()||void 0,m=Number.isInteger(o)&&o>0,g=m?o:void 0,f=m&&i*o||void 0,y=m||void 0,h=await L(e,{$apply:c,$orderby:p,$top:g,$skip:f,$count:y},r);_(t,h.value);for(let e=0;e<a.length;e+=1){const t=a[e];if("string"==typeof t.aggregate){if(t.parse){const a=K(e);for(const e of h.value){const l=e[a];e[a]=t.parse(l,t)}}}else if("object"==typeof t.aggregate&&t.aggregate.parse){const a=K(e);for(const e of h.value){const l=e[a];e[a]=t.aggregate.parse(l,t)}}}return h}function G(e,t){if(!e||null==t)return t;const a=e.indexOf("/");if(-1===a)return t[e];const l=e.substr(0,a),n=e.substr(a+1),o=t[l];return Array.isArray(o)?o.map((e=>G(n,e))):G(n,o)}function Z(e,t,a=e.path){const l=a.indexOf("/");-1===l&&(t[a]=e.parse(t[a],e));const n=a.substr(0,l),o=a.substr(l+1),i=t[n];return Array.isArray(i)?i.map((t=>Z(e,t,o))):G(o,i)}function _(e,t){for(const a of e)if(a.parse){if(a.$select)for(const e of t){const t=e[a.$select];e[a.$select]=a.parse(t,a)}if(a.$expand)for(const e of t)Z(a,e)}return t}function K(e){return`aggregatedProperty${e}`}function W(e,t,{aggregate:a}={}){const l=[];for(const n of t){const t=[];for(const l of e)a&&l.property.aggregate?t.push(n[K(l.propertyIndex)]):l.property.$expand?t.push(G(l.property.path,n)):l.property.$select&&t.push(n[l.property.$select]);l.push(t)}return l}function Y(e,t=null){return"asc"===(e?.direction??t)?"SortUp":"desc"===(e?.direction??t)?"SortDown":null}function J(e){return"desc"===e.direction?"desc":"asc"}const Q={name:"LlescaListView",components:{BaseListView:u},directives:{content:a},props:{endPoint:{type:[Array,String],required:!0},groupedProperties:{type:Array,default:()=>[]},properties:{type:Array,required:!0},flatGroups:{type:Boolean,default:!1},allAggregatedRow:{type:Boolean,default:!1},filter:{type:[String,Object],default:null},orderby:{type:Array,default:()=>[]},selection:{type:String,default:""},pageSize:{type:Number,default:null,validator:e=>Number.isInteger(e)},paginationPosition:{type:String,default:"bottomCenter",validator:e=>["topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","none"].includes(e)},compact:{type:Boolean,default:!1},headers:{type:Object,default:()=>{}},disableAutoLoad:{type:Boolean,default:!1}},data:()=>({data:[],rows:[],groups:[],selectedIndices:[],currentPage:0,entitesLoaded:0}),emits:["loadStart","loadEnd","updateSelectedItems","clickHeader","clickCell","pageChange"],computed:{columns(){const{groupedProperties:e,properties:t,orderby:a}=this;return[...e.map(((e,t)=>({title:e.label,align:e.align,icon:Y(e,"asc"),type:"groupedProperties",grouped:!0,property:e,propertyIndex:t}))),...t.filter((e=>"string"==typeof e.label)).map(((e,t)=>{const l=a?.find((t=>t.sentence===e.$select||t.sentence===e.path));return{title:e.label,align:e.align,icon:Y(l),type:"properties",grouped:!1,property:e,propertyIndex:t}}))].filter((e=>e))}},methods:{resetState(){const e=this.$.type.data();for(const t in e)this[t]=e[t]},async loadData(){this.$emit("loadStart"),await Promise.all([this.loadDetailData(),0===this.groups.length?this.loadGroupedData():void 0]);const e=this.groups.reduce(((e,t)=>Math.max(e,t.level||0)),0),t=this.groupedProperties.length;for(const a of this.groups)if(a.level===e){const e=this.rows.findIndex((e=>r(e,a.row,0,t))),l=o(this.rows,(e=>r(e,a.row,0,t)));a.startIndex=e,a.count=l+1-e}this.$emit("loadEnd")},async loadDetailData(){const e=await async function({endPoint:e,properties:t,orderby:a,filter:l,pageSize:n,currentPage:o,headers:i}){const r=Number.isInteger(n)&&n>0,d=await L(e,{$select:t.filter((e=>e.$select)).map((e=>e.$select)).join()||void 0,$expand:t.filter((e=>e.$expand)).map((e=>e.$expand)).join()||void 0,$orderby:a?.filter((e=>["asc","desc"].includes(e.direction))).map((e=>`${e.sentence} ${e.direction}`)).join()||void 0,$filter:l||void 0,$top:r?n:void 0,$skip:r&&o*n||void 0,$count:r||void 0},i);return d.value=_(t,d.value),d}({endPoint:this.endPoint,properties:this.groupedProperties.concat(this.properties),orderby:this.groupedProperties.map((e=>({sentence:e.path||e.$select,direction:J(e)}))).concat(this.orderby),filter:this.filter,pageSize:this.pageSize,currentPage:this.currentPage,headers:this.headers});this.data=e.value,this.rows=W(this.columns,e.value),this.entitesLoaded=e["@odata.count"]},loadAggregatedData(e){const t=this.groupedProperties.slice(0,e);return H({endPoint:this.endPoint,groupedProperties:t,properties:this.properties,orderby:t.map((e=>({sentence:e.path||e.$select,direction:"desc"===e.direction?"desc":"asc"}))),filter:this.filter,headers:this.headers})},async loadGroupedData(){if(this.groups=[],this.allAggregatedRow){const e=await this.loadAggregatedData(0),t=W(this.columns,e.value,{aggregate:!0});this.groups.push({startIndex:0,count:0,level:0,entity:e.value[0],row:t[0]})}const e=this.groupedProperties.length;if(this.flatGroups){const t=await this.loadAggregatedData(e),a=W(this.columns,t.value,{aggregate:!0});this.groups=this.groups.concat(i(t.value,a,((t,a)=>({startIndex:0,count:0,level:e,entity:t,row:a}))))}else for(let t=1;t<=e;t+=1){const e=await this.loadAggregatedData(t),a=W(this.columns,e.value,{aggregate:!0}),l=i(e.value,a,((e,a)=>({startIndex:0,count:0,level:t,entity:e,row:a})));for(;l.length>0;){const e=l.shift(),a=o(this.groups,(a=>r(e.row,a.row,0,t-1)));this.groups.splice(a+1,0,e)}}},goToPage(e){this.currentPage=e,this.updateSelectedIndices([]),this.loadData(),this.$emit("pageChange",e)},updateSelectedIndices(e){if(this.selectedIndices.length!==e.length||!this.selectedIndices.every(((t,a)=>t===e[a]))){this.selectedIndices=e;const t=e.map((e=>this.data[e]));this.$emit("updateSelectedItems",t)}}},mounted(){this.disableAutoLoad||this.loadData()}},X={name:"LlescaListViewAggregated",components:{BaseListView:u},props:{endPoint:{type:[Array,String],required:!0},wrapperProperties:{type:Array,default:()=>[]},groupedProperties:{type:Array,required:!0},properties:{type:Array,required:!0},flatGroups:{type:Boolean,default:!1},allAggregatedRow:{type:Boolean,default:!1},filter:{type:[String,Object],default:null},pageSize:{type:Number,default:null,validator:e=>Number.isInteger(e)},paginationPosition:{type:String,default:"bottomCenter",validator:e=>["topLeft","topCenter","topRight","bottomLeft","bottomCenter","bottomRight","none"].includes(e)},compact:{type:Boolean,default:!1},headers:{type:Object,default:()=>{}}},data:()=>({data:[],rows:[],groups:[],currentPage:0,entitesLoaded:0}),emits:["loadStart","loadEnd","clickHeader","clickCell"],computed:{columns(){const{wrapperProperties:e,groupedProperties:t,properties:a}=this;return[...e.map(((e,t)=>({title:e.label,align:e.align,icon:Y(e,"asc"),type:"wrapperProperties",grouped:!0,property:e,propertyIndex:t}))),...t.map(((e,t)=>({title:e.label,align:e.align,icon:Y(e),type:"groupedProperties",grouped:!1,property:e,propertyIndex:t}))),...a.map(((e,t)=>"string"==typeof e.label?{title:e.label,align:e.align,icon:Y(e),type:"properties",grouped:!1,property:e,propertyIndex:t}:void 0))].filter((e=>e))}},methods:{resetState(){const e=this.$.type.data();for(const t in e)this[t]=e[t]},async loadData(){this.$emit("loadStart"),await Promise.all([this.loadDetailData(),0===this.groups.length?this.loadGroupedData():void 0]);const e=this.groups.reduce(((e,t)=>Math.max(e,t.level||0)),0),t=this.wrapperProperties.length;for(const a of this.groups)if(a.level===e){const e=this.rows.findIndex((e=>r(e,a.row,0,t))),l=o(this.rows,(e=>r(e,a.row,0,t)));a.startIndex=e,a.count=l+1-e}this.$emit("loadEnd")},async loadDetailData(){const e=await this.loadAggregatedData(this.wrapperProperties.length,{withGroupedProperties:!0,paginated:!0,headers:this.headers});this.data=e.value,this.rows=W(this.columns,e.value,{aggregate:!0}),this.entitesLoaded=e["@odata.count"]},loadAggregatedData(e,{withGroupedProperties:t,paginated:a}={}){const l=this.wrapperProperties.slice(0,e),n=t?l.concat(this.groupedProperties):l;return H({endPoint:this.endPoint,groupedProperties:n,properties:this.properties,orderby:[...l.map((e=>({sentence:e.path||e.$select,direction:"desc"===e.direction?"desc":"asc"}))),...(t?this.groupedProperties:[]).map((e=>({sentence:e.path||e.$select,direction:e.direction}))),...this.properties.map(((e,t)=>({sentence:K(t),direction:e.direction})))].filter((e=>["asc","desc"].includes(e.direction))),filter:this.filter,pageSize:a&&this.pageSize,currentPage:this.currentPage,headers:this.headers})},async loadGroupedData(){if(this.groups=[],this.allAggregatedRow){const e=await this.loadAggregatedData(0),t=W(this.columns,e.value,{aggregate:!0});this.groups.push({startIndex:0,count:0,level:0,entity:e.value[0],row:t[0]})}const e=this.wrapperProperties.length;if(this.flatGroups){const t=await this.loadAggregatedData(e),a=W(this.columns,t.value,{aggregate:!0});this.groups=this.groups.concat(i(t.value,a,((t,a)=>({startIndex:0,count:0,level:e,entity:t,row:a}))))}else for(let t=1;t<=e;t+=1){const e=await this.loadAggregatedData(t),a=W(this.columns,e.value,{aggregate:!0}),l=i(e.value,a,((e,a)=>({startIndex:0,count:0,level:t,entity:e,row:a})));for(;l.length>0;){const e=l.shift(),a=o(this.groups,(a=>r(e.row,a.row,0,t-1)));this.groups.splice(a+1,0,e)}}},goToPage(e){this.currentPage=e,this.loadData()}},mounted(){this.loadData()}},ee={BaseListView:u,ConfigListViewSimple:B,FieldCheckbox:A,FieldCombo:M,FieldComboAsync:j,FieldDate:(0,s.Z)(O,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-date-picker");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,"error-message":o.errorMessage,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,readonly:l.readonly,placeholder:l.placeholder,"not-writable":l.notWritable,days:l.days,months:l.months,"go-today":l.goToday,"first-day-of-the-week":l.firstDayOfTheWeek,today:l.today,"model-value":t.rawValue,parse:l.parse,stringify:l.formatify,"stringify-focus":l.stringify,"onUpdate:modelValue":i.handleUpdateModelValue,onFocus:a[0]||(a[0]=e=>t.$emit("focus",e)),onBlur:a[1]||(a[1]=e=>t.$emit("blur",e))},null,8,["label","description","invalid","error-message","disabled","required","borderless","underlined","readonly","placeholder","not-writable","days","months","go-today","first-day-of-the-week","today","model-value","parse","stringify","stringify-focus","onUpdate:modelValue"])}]]),FieldDictionary:(0,s.Z)(U,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("llesca-field-combo");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,options:o.options,readonly:l.readonly,multiple:l.multiple,"allow-freeform":l.allowFreeform,"auto-complete":l.autoComplete,"accent-insensitive":l.accentInsensitive,placeholder:l.placeholder,"immediate-scroll":l.immediateScroll,"hide-checkbox":l.hideCheckbox,"max-selected-options":l.maxSelectedOptions,validator:l.validator,"data-type":l.dataType,"data-type-prop":l.dataTypeProp,"model-value":l.modelValue,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e)),onClick:a[1]||(a[1]=e=>t.$emit("click")),onFocus:a[2]||(a[2]=e=>t.$emit("focus",e)),onBlur:a[3]||(a[3]=e=>t.$emit("blur",e)),onKeydown:a[4]||(a[4]=e=>t.$emit("keydown",e))},null,8,["label","description","invalid","disabled","required","borderless","underlined","options","readonly","multiple","allow-freeform","auto-complete","accent-insensitive","placeholder","immediate-scroll","hide-checkbox","max-selected-options","validator","data-type","data-type-prop","model-value"])}]]),FieldDictionaryAsync:(0,s.Z)(E,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("llesca-field-combo-async");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",name:l.name,label:l.label,description:l.description,invalid:l.invalid,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,"get-options":i.getOptions,"get-options-wait":l.getOptionsWait,"filter-options":l.filterOptions,"model-value":l.modelValue,readonly:l.readonly,multiple:l.multiple,"auto-complete":l.autoComplete,"accent-insensitive":l.accentInsensitive,placeholder:l.placeholder,"immediate-scroll":l.immediateScroll,"max-selected-options":l.maxSelectedOptions,validator:l.validator,"data-type":l.dataType,"data-type-prop":l.dataTypeProp,"onUpdate:modelValue":a[0]||(a[0]=e=>t.$emit("update:modelValue",e)),onClick:a[1]||(a[1]=e=>t.$emit("click")),onFocus:a[2]||(a[2]=e=>t.$emit("focus",e)),onBlur:a[3]||(a[3]=e=>t.$emit("blur",e)),onKeydown:a[4]||(a[4]=e=>t.$emit("keydown",e))},null,8,["name","label","description","invalid","disabled","required","borderless","underlined","get-options","get-options-wait","filter-options","model-value","readonly","multiple","auto-complete","accent-insensitive","placeholder","immediate-scroll","max-selected-options","validator","data-type","data-type-prop"])}]]),FieldNumber:(0,s.Z)(R,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-number-field");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,"error-message":o.errorMessage,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,placeholder:l.placeholder,prefix:l.prefix,suffix:l.suffix,multiline:l.multiline,icon:l.icon,readonly:l.readonly,maxlength:l.maxlength,unresizable:l.unresizable,"auto-adjust-height":l.autoAdjustHeight,"model-value":t.rawValue,"format-style":l.formatStyle,"use-grouping":l.useGrouping,"minimum-integer-digits":l.minimumIntegerDigits,"minimum-fraction-digits":l.minimumFractionDigits,"maximum-fraction-digits":l.maximumFractionDigits,"minimum-significant-digits":l.minimumSignificantDigits,"maximum-significant-digits":l.maximumSignificantDigits,parse:l.parse,stringify:l.formatify,"stringify-focus":l.stringify,align:l.align,"align-focus":l.alignFocus,"onUpdate:modelValue":i.handleUpdateModelValue,onClick:a[0]||(a[0]=e=>t.$emit("click")),onFocus:a[1]||(a[1]=e=>t.$emit("focus",e)),onBlur:a[2]||(a[2]=e=>t.$emit("blur",e))},null,8,["label","description","invalid","error-message","disabled","required","borderless","underlined","placeholder","prefix","suffix","multiline","icon","readonly","maxlength","unresizable","auto-adjust-height","model-value","format-style","use-grouping","minimum-integer-digits","minimum-fraction-digits","maximum-fraction-digits","minimum-significant-digits","maximum-significant-digits","parse","stringify","stringify-focus","align","align-focus","onUpdate:modelValue"])}]]),FieldText:(0,s.Z)(z,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("fura-text-field");return(0,e.openBlock)(),(0,e.createBlock)(r,{ref:"field",label:l.label,description:l.description,invalid:l.invalid,"error-message":o.errorMessage,disabled:l.disabled,required:l.required,borderless:l.borderless,underlined:l.underlined,placeholder:l.placeholder,prefix:l.prefix,suffix:l.suffix,multiline:l.multiline,icon:l.icon,readonly:l.readonly,maxlength:l.maxlength,unresizable:l.unresizable,"auto-adjust-height":l.autoAdjustHeight,"model-value":l.modelValue,"onUpdate:modelValue":i.handleUpdateModelValue,onClick:a[0]||(a[0]=e=>t.$emit("click")),onFocus:a[1]||(a[1]=e=>t.$emit("focus",e)),onBlur:a[2]||(a[2]=e=>t.$emit("blur",e)),onKeydown:a[3]||(a[3]=e=>t.$emit("keydown",e))},null,8,["label","description","invalid","error-message","disabled","required","borderless","underlined","placeholder","prefix","suffix","multiline","icon","readonly","maxlength","unresizable","auto-adjust-height","model-value","onUpdate:modelValue"])}]]),Form:I,ListView:(0,s.Z)(Q,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("BaseListView");return(0,e.openBlock)(),(0,e.createBlock)(r,{"auto-layout":"auto","without-group-header":"",columns:i.columns,groups:o.groups,rows:o.rows,compact:l.compact,selection:l.selection,"selected-indices":o.selectedIndices,"page-size":l.pageSize,"current-page":o.currentPage,"data-count":o.entitesLoaded,"pagination-position":l.paginationPosition,"onUpdate:selectedIndices":i.updateSelectedIndices,onClickHeader:a[0]||(a[0]=e=>t.$emit("clickHeader",e)),onClickCell:a[1]||(a[1]=e=>t.$emit("clickCell",e)),"onUpdate:currentPage":i.goToPage},{default:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda.\r\n        @binding {number} rowIndex Índice de la fila.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {string} content Contenido de la celda.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n      "),(0,e.renderSlot)(t.$slots,"default",{rowIndex:a.rowIndex,columnIndex:a.columnIndex,content:a.content,column:a.column})])),header:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una cabecera.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {number} index Índice de la definición de la columna.\r\n      "),(0,e.renderSlot)(t.$slots,"header",{column:a.column,index:a.index})])),bodyHeader:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda de un encabezado de cuerpo.\r\n        @binding {number} groupIndex Índice de la definición del grupo.\r\n        @binding {object} group Referencia a la definición del grupo.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {Array} data Datos del grupo.\r\n      "),(0,e.renderSlot)(t.$slots,"bodyHeader",{groupIndex:a?.groupIndex,group:a?.group,columnIndex:a?.columnIndex,column:a?.column,data:a?.data})])),bodyFooter:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda de un pie de cuerpo.\r\n        @binding {number} groupIndex Índice de la definición del grupo.\r\n        @binding {object} group Referencia a la definición del grupo.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {Array} data Datos del grupo.\r\n      "),(0,e.renderSlot)(t.$slots,"bodyFooter",{groupIndex:a?.groupIndex,group:a?.group,columnIndex:a?.columnIndex,column:a?.column,data:a?.data})])),_:3},8,["columns","groups","rows","compact","selection","selected-indices","page-size","current-page","data-count","pagination-position","onUpdate:selectedIndices","onUpdate:currentPage"])}]]),ListViewAggregated:(0,s.Z)(X,[["render",function(t,a,l,n,o,i){const r=(0,e.resolveComponent)("BaseListView");return(0,e.openBlock)(),(0,e.createBlock)(r,{class:"llesca-totals","auto-layout":"auto","without-group-header":"",columns:i.columns,groups:o.groups,rows:o.rows,compact:l.compact,"page-size":l.pageSize,"current-page":o.currentPage,"data-count":o.entitesLoaded,"pagination-position":l.paginationPosition,onClickHeader:a[0]||(a[0]=e=>t.$emit("clickHeader",e)),onClickCell:a[1]||(a[1]=e=>t.$emit("clickCell",e)),"onUpdate:currentPage":i.goToPage},{default:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda.\r\n        @binding {number} rowIndex Índice de la fila.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {string} content Contenido de la celda.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n      "),(0,e.renderSlot)(t.$slots,"default",{rowIndex:a.rowIndex,columnIndex:a.columnIndex,content:a.content,column:a.column})])),header:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una cabecera.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {number} index Índice de la definición de la columna.\r\n      "),(0,e.renderSlot)(t.$slots,"header",{column:a.column,index:a.index})])),bodyHeader:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda de un encabezado de cuerpo.\r\n        @binding {number} groupIndex Índice de la definición del grupo.\r\n        @binding {object} group Referencia a la definición del grupo.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {Array} data Datos del grupo.\r\n      "),(0,e.renderSlot)(t.$slots,"bodyHeader",{groupIndex:a?.groupIndex,group:a?.group,columnIndex:a?.columnIndex,column:a?.column,data:a?.data})])),bodyFooter:(0,e.withCtx)((a=>[(0,e.createCommentVNode)("\r\n        @slot Contenido de una celda de un pie de cuerpo.\r\n        @binding {number} groupIndex Índice de la definición del grupo.\r\n        @binding {object} group Referencia a la definición del grupo.\r\n        @binding {number} columnIndex Índice de la definición de la columna.\r\n        @binding {object} column Referencia a la definición de la columna.\r\n        @binding {Array} data Datos del grupo.\r\n      "),(0,e.renderSlot)(t.$slots,"bodyFooter",{groupIndex:a?.groupIndex,group:a?.group,columnIndex:a?.columnIndex,column:a?.column,data:a?.data})])),_:3},8,["columns","groups","rows","compact","page-size","current-page","data-count","pagination-position","onUpdate:currentPage"])}]]),StackDraggable:$},te={install:function(e,{prefix:t="llesca"}={}){for(const t in ee){const a=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e.component("llesca-"+a,ee[t])}},components:ee,version:"0.1.1"}})(),n.default})()}));