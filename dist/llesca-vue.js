!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Vue")):"function"==typeof define&&define.amd?define(["Vue"],t):"object"==typeof exports?exports.llescaVue=t(require("Vue")):e.llescaVue=t(e.Vue)}(self,(e=>(()=>{"use strict";var t={407:(e,t)=>{t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[e,i]of t)n[e]=i;return n}},740:t=>{t.exports=e}},n={};function i(e){var l=n[e];if(void 0!==l)return l.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,i),a.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var l={};return(()=>{i.d(l,{default:()=>be});var e={};i.r(e),i.d(e,{createUrl:()=>L,requestBatch:()=>Y,requestDelete:()=>Z,requestGet:()=>z,requestPatch:()=>J,requestPost:()=>H,requestPut:()=>G});var t={};i.r(t),i.d(t,{entityBase:()=>se,entityClear:()=>I,entityClone:()=>R,entityConsolidate:()=>j,entityData:()=>_,entityDefinition:()=>ce,entityDelete:()=>re,entityHasPendingChanges:()=>pe,entityLoad:()=>Q,entityLoadCollection:()=>ee,entityParent:()=>de,entityPrimaryValue:()=>ue,entitySave:()=>le,entitySyncData:()=>O,entitySyncState:()=>C,useEntity:()=>N,useEntityCollection:()=>F,useEntityFromId:()=>X});var n={};i.r(n),i.d(n,{useUrl:()=>fe});var a={};i.r(a),i.d(a,{useFetchGet:()=>me});var o={};i.r(o),i.d(o,{useOptionsLoader:()=>ye});var r={};i.r(r),i.d(r,{useValidations:()=>ve});var d={};i.r(d),i.d(d,{clone:()=>ge});var s=i(740);function u(e,t,n){let i;return t?(...l)=>{clearTimeout(i),i=setTimeout((()=>{i=null,e.apply(n,l)}),t)}:e}const c={__name:"field-combo",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},options:{type:Array,required:!0},readonly:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},allowFreeform:{type:Boolean,default:void 0},autoComplete:{type:Boolean,default:void 0},accentInsensitive:{type:Boolean,default:void 0},placeholder:{type:String,default:void 0},immediateScroll:{type:Boolean,default:void 0},maxSelectedOptions:{type:Number,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:void 0,default:void 0},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>(i.multiple&&!e?.length||!i.multiple&&!e)&&"Aquest camp es requerit."),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&(i.multiple?i.modelValue?.length>0&&n("update:modelValue",[]):null!=i.modelValue&&n("update:modelValue",null))})),(0,s.watch)((()=>i.options),(e=>{if(i.multiple){const t=i.modelValue.filter((t=>e.some((e=>e.value===t))));t.length!==i.modelValue.length&&n("update:modelValue",t)}else null!=i.modelValue&&(e.some((e=>e.value===i.modelValue))||null==i.modelValue||n("update:modelValue",null))})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-combo-box");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,options:e.options,readonly:e.readonly,multiple:e.multiple,"allow-freeform":e.allowFreeform,"auto-complete":e.autoComplete,"accent-insensitive":e.accentInsensitive,placeholder:e.placeholder,"immediate-scroll":e.immediateScroll,"max-selected-options":e.maxSelectedOptions,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","invalid","borderless","underlined","options","readonly","multiple","allow-freeform","auto-complete","accent-insensitive","placeholder","immediate-scroll","max-selected-options","error-message","model-value","required","disabled"])}}},p={__name:"field-combo-async",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:!1},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},getOptions:{type:Function,required:!0},getOptionsWait:{type:Number,default:void 0},filterOptions:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},autoComplete:{type:Boolean,default:void 0},accentInsensitive:{type:Boolean,default:void 0},placeholder:{type:String,default:void 0},immediateScroll:{type:Boolean,default:void 0},maxSelectedOptions:{type:Number,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:void 0,default:void 0},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>(i.multiple&&!e?.length||!i.multiple&&!e)&&"Aquest camp es requerit."),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",i.multiple?[]:null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-combo-box-async");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,borderless:e.borderless,underlined:e.underlined,"get-options":e.getOptions,"get-options-wait":e.getOptionsWait,"filter-options":e.filterOptions,readonly:e.readonly,multiple:e.multiple,"auto-complete":e.autoComplete,"accent-insensitive":e.accentInsensitive,placeholder:e.placeholder,"immediate-scroll":e.immediateScroll,"max-selected-options":e.maxSelectedOptions,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","borderless","underlined","get-options","get-options-wait","filter-options","readonly","multiple","auto-complete","accent-insensitive","placeholder","immediate-scroll","max-selected-options","error-message","model-value","required","disabled"])}}},f={__name:"field-date",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},placeholder:{type:String,default:void 0},notWritable:{type:Boolean,default:void 0},days:{type:Array,default:void 0},months:{type:Array,default:void 0},goToday:{type:String,default:void 0},firstDayOfTheWeek:{type:Number,default:void 0},today:{type:Date,default:void 0},parse:{type:Function,default:void 0},stringifyFocus:{type:Function,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},stringify:{type:Function,default:e=>{const t=(e,t=2)=>e.toString().padStart(t,"0");return`${t(e.getDate())}/${t(e.getMonth()+1)}/${t(e.getFullYear(),4)}`}},modelValue:{type:Date,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:{type:Date,default:null},max:{type:Date,default:null},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>!e&&"Aquest camp es requerit."),null!==i.min&&(e=>e instanceof Date&&e.getTime()<i.min.getTime()&&`El valor mínim es ${i.stringify(i.min)}.`),null!==i.max&&(e=>e instanceof Date&&e.getTime()>i.max.getTime()&&`El valor màxim es ${i.stringify(i.max)}.`),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-date-picker");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,readonly:e.readonly,placeholder:e.placeholder,"not-writable":e.notWritable,days:e.days,months:e.months,"go-today":e.goToday,"first-day-of-the-week":e.firstDayOfTheWeek,today:e.today,parse:e.parse,stringify:e.stringify,"stringify-focus":e.stringifyFocus,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","invalid","borderless","underlined","readonly","placeholder","not-writable","days","months","go-today","first-day-of-the-week","today","parse","stringify","stringify-focus","error-message","model-value","required","disabled"])}}},m={__name:"field-dropdown",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},options:{type:Array,required:!0},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},multiple:{type:Boolean,default:void 0},immediateScroll:{type:Boolean,default:void 0},maxSelectedOptions:{type:Number,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:void 0,default:void 0},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>(i.multiple&&!e?.length||!i.multiple&&!e)&&"Aquest camp es requerit."),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&(i.multiple?i.modelValue?.length>0&&n("update:modelValue",[]):null!=i.modelValue&&n("update:modelValue",null))})),(0,s.watch)((()=>i.options),(e=>{if(i.multiple){const t=i.modelValue.filter((t=>e.some((e=>e.value===t))));t.length!==i.modelValue.length&&n("update:modelValue",t)}else e.some((e=>e.value===i.modelValue))||null==i.modelValue||n("update:modelValue",null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-dropdown");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,options:e.options,placeholder:e.placeholder,readonly:e.readonly,multiple:e.multiple,"immediate-scroll":e.immediateScroll,"max-selected-options":e.maxSelectedOptions,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","invalid","borderless","underlined","options","placeholder","readonly","multiple","immediate-scroll","max-selected-options","error-message","model-value","required","disabled"])}}},y={__name:"field-number",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},placeholder:{type:String,default:void 0},prefix:{type:String,default:void 0},suffix:{type:String,default:void 0},multiline:{type:Boolean,default:void 0},icon:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},maxlength:{type:Number,default:void 0},unresizable:{type:Boolean,default:void 0},autoAdjustHeight:{type:Boolean,default:void 0},formatStyle:{type:String,default:void 0},useGrouping:{type:Boolean,default:void 0},minimumIntegerDigits:{type:Number,default:void 0},minimumFractionDigits:{type:Number,default:void 0},maximumFractionDigits:{type:Number,default:void 0},minimumSignificantDigits:{type:Number,default:void 0},maximumSignificantDigits:{type:Number,default:void 0},parse:{type:Function,default:void 0},stringify:{type:Function,default:void 0},stringifyFocus:{type:Function,default:void 0},align:{type:String,default:void 0},alignFocus:{type:String,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:Number,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","click","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>"number"!=typeof e&&"Aquest camp es requerit."),null!==i.min&&(e=>"number"==typeof e&&e<i.min&&`El valor mínim es ${i.min}.`),null!==i.max&&(e=>"number"==typeof e&&e>i.max&&`El valor màxim es ${i.max}.`),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-number-field");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,placeholder:e.placeholder,suffix:e.suffix,multiline:e.multiline,icon:e.icon,readonly:e.readonly,maxlength:e.maxlength,unresizable:e.unresizable,"auto-adjust-height":e.autoAdjustHeight,"format-style":e.formatStyle,"use-grouping":e.useGrouping,"minimum-integer-digits":e.minimumIntegerDigits,"minimum-fraction-digits":e.minimumFractionDigits,"maximum-fraction-digits":e.maximumFractionDigits,"minimum-significant-digits":e.minimumSignificantDigits,"maximum-significant-digits":e.maximumSignificantDigits,parse:e.parse,stringify:e.stringify,"stringify-focus":e.stringifyFocus,align:e.align,"align-focus":e.alignFocus,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onClick:i[0]||(i[0]=e=>n("click",e)),onFocus:i[1]||(i[1]=e=>n("focus",e)),onBlur:f},null,8,["label","invalid","borderless","underlined","placeholder","suffix","multiline","icon","readonly","maxlength","unresizable","auto-adjust-height","format-style","use-grouping","minimum-integer-digits","minimum-fraction-digits","maximum-fraction-digits","minimum-significant-digits","maximum-significant-digits","parse","stringify","stringify-focus","align","align-focus","error-message","model-value","required","disabled"])}}},v={__name:"field-number-spin",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},step:{type:Number,default:void 0},inc:{type:Function,default:void 0},dec:{type:Function,default:void 0},parse:{type:Function,default:void 0},stringify:{type:Function,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:Number,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},min:{type:Number,default:null},max:{type:Number,default:null},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>"number"!=typeof e&&"Aquest camp es requerit."),null!==i.min&&(e=>"number"==typeof e&&e<i.min&&`El valor mínim es ${i.min}.`),null!==i.max&&(e=>"number"==typeof e&&e>i.max&&`El valor màxim es ${i.max}.`),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-spin-button");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,step:e.step,inc:e.inc,dec:e.dec,parse:e.parse,stringify:e.stringify,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","invalid","borderless","underlined","step","inc","dec","parse","stringify","error-message","model-value","required","disabled"])}}},g={__name:"field-tag",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},getItems:{type:Function,required:!0},getItemsWait:{type:Number,default:void 0},filterItems:{type:Boolean,default:void 0},autoComplete:{type:Boolean,default:void 0},accentInsensitive:{type:Boolean,default:void 0},maxSelectedItems:{type:Number,default:void 0},placeholder:{type:String,default:void 0},loadingText:{type:String,default:void 0},immediateScroll:{type:Boolean,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:Array,default:()=>[]},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","focus","blur"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>!e?.length&&"Aquest camp es requerit."),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",[])})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-tag-picker");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,readonly:e.readonly,"get-items":e.getItems,"get-items-wait":e.getItemsWait,"filter-items":e.filterItems,"auto-complete":e.autoComplete,"accent-insensitive":e.accentInsensitive,"max-selected-items":e.maxSelectedItems,placeholder:e.placeholder,"loading-text":e.loadingText,"immediate-scroll":e.immediateScroll,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onFocus:i[0]||(i[0]=e=>n("focus",e)),onBlur:f},null,8,["label","description","invalid","borderless","underlined","readonly","get-items","get-items-wait","filter-items","auto-complete","accent-insensitive","max-selected-items","placeholder","loading-text","immediate-scroll","error-message","model-value","required","disabled"])}}},h={__name:"field-text",props:{label:{type:String,default:void 0},description:{type:String,default:void 0},invalid:{type:Boolean,default:void 0},borderless:{type:Boolean,default:void 0},underlined:{type:Boolean,default:void 0},placeholder:{type:String,default:void 0},prefix:{type:String,default:void 0},suffix:{type:String,default:void 0},multiline:{type:Boolean,default:void 0},icon:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},unresizable:{type:Boolean,default:void 0},autoAdjustHeight:{type:Boolean,default:void 0},password:{type:Boolean,default:void 0},createField:{type:Function,default:null},name:{type:[String,Symbol],default:()=>Symbol("fieldText")},modelValue:{type:String,default:null},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},maxlength:{type:Number,default:null},pattern:{type:RegExp,default:null},rules:{type:Array,default:null},autoValidate:{type:String,default:null,validator:e=>!e||["update","blur"].includes(e)},autoValidateWait:{type:Number,default:0},clearValueOnDisabled:{type:Boolean,default:!1}},emits:["update:modelValue","click","focus","blur","keydown"],setup(e,{expose:t,emit:n}){const i=e,l=(0,s.computed)((()=>[i.required&&(e=>!e&&"Aquest camp es requerit."),null!==i.maxlength&&(e=>e?.length>i.maxlength&&`La longitud màxima es de ${i.maxlength} caracters.`),null!==i.pattern&&(e=>!!e&&!e?.match(i.pattern)&&"El valor del text no compleix el patró especificat."),...i.rules||[]].filter((e=>e)))),{errorMessage:a,validate:o,clear:r,destroy:d}=i.createField?i.createField(i.name,(0,s.toRef)(i,"modelValue"),{rules:l,skip:(0,s.toRef)(i,"disabled")}):{errorMessage:(0,s.ref)(null),validate:()=>!0,clear:()=>{},destroy:()=>{}};t({validate:o,clear:r});const c=(0,s.computed)((()=>u(o,i.autoValidateWait)));function p(e){n("update:modelValue",e||null),"update"===i.autoValidate&&(0,s.nextTick)((()=>c.value()))}function f(e){n("blur",e),"blur"===i.autoValidate&&o()}return(0,s.watch)((()=>i.disabled),(e=>{e&&i.clearValueOnDisabled&&n("update:modelValue",null)})),(0,s.onBeforeUnmount)(d),(t,i)=>{const l=(0,s.resolveComponent)("fura-text-field");return(0,s.openBlock)(),(0,s.createBlock)(l,{label:e.label,description:e.description,invalid:e.invalid,borderless:e.borderless,underlined:e.underlined,placeholder:e.placeholder,prefix:e.prefix,suffix:e.suffix,multiline:e.multiline,icon:e.icon,readonly:e.readonly,maxlength:e.maxlength,unresizable:e.unresizable,"auto-adjust-height":e.autoAdjustHeight,password:e.password,"error-message":(0,s.unref)(a),"model-value":e.modelValue,required:e.required,disabled:e.disabled,"onUpdate:modelValue":p,onClick:i[0]||(i[0]=e=>n("click",e)),onFocus:i[1]||(i[1]=e=>n("focus",e)),onBlur:f,onKeydown:i[2]||(i[2]=e=>n("keydown",e))},null,8,["label","description","invalid","borderless","underlined","placeholder","prefix","suffix","multiline","icon","readonly","maxlength","unresizable","auto-adjust-height","password","error-message","model-value","required","disabled"])}}},b={key:0,class:"stackDraggable-item"},w={class:"stackDraggable-content"},V=["onDragstart"],x={class:"stackDraggable-handler"},S={key:1,class:"stackDraggable-item"},B={class:"stackDraggable-content"},E={__name:"stack-draggable",props:{name:{type:String,default:()=>String(Math.random()).replace("0.","")},primaryKey:{type:String,required:!0},modelValue:{type:Array,required:!0},handlerPosition:{type:String,default:"center",validate:e=>!e||["top","center","bottom"].includes(e)}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,i="text/llesca-stack-draggable-key/",l=(0,s.useSlots)(),a=(0,s.ref)([]),o=(0,s.computed)((()=>l.header&&-1!==l.header().findIndex((e=>e.type!==s.Comment)))),r=(0,s.computed)((()=>l.footer&&-1!==l.footer().findIndex((e=>e.type!==s.Comment))));function d(e){e.dataTransfer.types.includes(i+n.name)&&e.preventDefault()}function u(e){const l=e.dataTransfer.getData(i+n.name),o=n.modelValue.findIndex((e=>e[n.primaryKey]===l)),r=a.value.filter((e=>e.el)).reduce(((t,n)=>n.el.getBoundingClientRect().bottom>e.pageY&&n.index<t?n.index:t),a.value.length);var d,s,u;t("update:modelValue",(d=n.modelValue,(s=o)===(u=r)?d:s>u?[...d.slice(0,u),d[s],...d.slice(u,s),...d.slice(s+1)]:[...d.slice(0,s),...d.slice(s+1,u+1),d[s],...d.slice(u+1)]))}return(0,s.onBeforeUpdate)((()=>{a.value=[]})),(t,l)=>{const c=(0,s.resolveComponent)("fura-icon");return(0,s.openBlock)(),(0,s.createElementBlock)("div",{onDragover:d,onDrop:u},[(0,s.unref)(o)?((0,s.openBlock)(),(0,s.createElementBlock)("div",b,[(0,s.createVNode)(c,{class:"stackDraggable-dragIcon"}),(0,s.createElementVNode)("div",w,[(0,s.renderSlot)(t.$slots,"header")])])):(0,s.createCommentVNode)("v-if",!0),((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(e.modelValue,((o,r)=>((0,s.openBlock)(),(0,s.createElementBlock)("div",{key:o[e.primaryKey],ref_for:!0,ref:e=>a.value.push({item:o,index:r,el:e}),draggable:"true",class:"stackDraggable-item",onDragstart:(0,s.withModifiers)((t=>{return l=t,a=o[e.primaryKey],l.dataTransfer.effectAllowed="move",l.dataTransfer.droptAllowed="move",void l.dataTransfer.setData(i+n.name,a);var l,a}),["stop"])},[(0,s.createElementVNode)("div",x,[(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["stackDraggable-cover",{"stackDraggable-hide":"top"===e.handlerPosition}]),draggable:"true",onDragstart:l[0]||(l[0]=(0,s.withModifiers)((()=>{}),["stop","prevent"]))},null,34),(0,s.createVNode)(c,{class:"stackDraggable-dragIcon",name:"GripperDotsVertical"}),(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["stackDraggable-cover",{"stackDraggable-hide":"bottom"===e.handlerPosition}]),draggable:"true",onDragstart:l[1]||(l[1]=(0,s.withModifiers)((()=>{}),["stop","prevent"]))},null,34)]),(0,s.createElementVNode)("div",{class:"stackDraggable-content",draggable:"true",onDragstart:l[2]||(l[2]=(0,s.withModifiers)((()=>{}),["stop","prevent"]))},[(0,s.renderSlot)(t.$slots,"default",{item:o,key:r[e.primaryKey],index:r})],32)],40,V)))),128)),(0,s.unref)(r)?((0,s.openBlock)(),(0,s.createElementBlock)("div",S,[(0,s.createVNode)(c,{class:"stackDraggable-dragIcon"}),(0,s.createElementVNode)("div",B,[(0,s.renderSlot)(t.$slots,"footer")])])):(0,s.createCommentVNode)("v-if",!0)],32)}}},k=(0,i(407).Z)(E,[["__scopeId","data-v-3d8db5ed"]]),D=Symbol("internalState");function O(e,t){const n=e?.[D];if(e instanceof N){for(const t in e)e[t]=void 0;if("object"==typeof t)for(const n in t)e[n]=t[n];return!0}if(e instanceof F){const i=n.newEntities.splice(0,n.newEntities.length);for(const e of i)e[D].scope.stop();n.deletedIndices.clear();for(let e=0;e<n.storedEntities.length;e+=1)n.deletedIndices.add(e);if(Array.isArray(t)){const{primaryKey:i}=n.definition,l=Array.from(t);for(let e=0;e<n.storedEntities.length;e+=1){const t=n.storedEntities[e],a=t[i],o=l.findIndex((e=>e[i]===a));if(o>-1){const[i]=l.splice(o,1);O(t,i),n.deletedIndices.delete(e)}}for(const t of l)e.add(t)}return!0}return!1}function F(e,{scope:t=(0,s.getCurrentScope)(),root:n,parent:i}={}){const l=new Proxy(t.run((()=>{const l=(0,s.shallowReactive)([]),a=(0,s.shallowReactive)([]),o=(0,s.shallowReactive)(new Set),r=(0,s.computed)((()=>l.filter(((e,t)=>!o.has(t))))),d=(0,s.computed)((()=>r.value.concat(a)));return{scope:t,definition:e,storedEntities:l,newEntities:a,deletedIndices:o,remainingEntities:r,entities:d,root:n,parent:i}})),q);return l[D].root=n??l,l}const q={get(e,t,n){if("string"==typeof t){if(t in e.entities.value)return e.entities.value[t];if(t in P)return P[t].bind(null,e,n)}return t===D?e:"__v_skip"===t||void 0},set:(e,t,n,i)=>"object"==typeof n&&"length"!==t&&t in e.entities.value&&O(e.entities.value[t],n),has:(e,t)=>Reflect.has(e.entities.value,t),ownKeys:e=>Reflect.ownKeys(e.entities.value),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e.entities.value,t),getPrototypeOf:e=>F.prototype},P={create(e,t){const n=N(e.definition,{scope:e.scope,root:e.root,parent:t}),{foreingKey:i}=e.definition;if(i&&e.parent){const t=e.parent[D];n[i]=t.properties[t.definition.primaryKey].value}return n},add(e,t,n){const{foreingKey:i}=e.definition;if(i&&e.parent&&void 0===n[i]){const t=e.parent[D];n[i]=t.properties[t.definition.primaryKey].value}if(n instanceof N&&n[D].root===e.root)return e.newEntities.push(n),n;const l=N(e.definition,{scope:e.scope,root:e.root,parent:t});return O(l,n),e.newEntities.push(l),l},delete(e,t,n){if("length"!==n&&n in e.entities.value){const t=Number(n);if(t<e.remainingEntities.value.length){const n=e.remainingEntities.value[t],i=e.storedEntities.indexOf(n);e.deletedIndices.add(i)}else{const n=t-e.remainingEntities.value.length,[i]=e.newEntities.splice(n,1);i[D].scope.stop()}}},[Symbol.species]:(e,t)=>Array,[Symbol.iterator]:(e,t)=>e.entities.value.value(),at:(e,t,n)=>e.entities.value.at(n),concat:(e,t,...n)=>e.entities.value.concat(...n),copyWithin(){throw new Error("'copyWithin' method is not available.")},entries:(e,t)=>e.entities.value.entries(),every:(e,t,n,i)=>e.entities.value.every(n,i),fill(){throw new Error("'copyWithin' method is not available.")},filter:(e,t,n,i)=>e.entities.value.filter(n,i),find:(e,t,n,i)=>e.entities.value.find(n,i),findIndex:(e,t,n,i)=>e.entities.value.findIndex(n,i),findLast:(e,t,n,i)=>e.entities.value.findLast(n,i),findLastIndex:(e,t,n,i)=>e.entities.value.findLastIndex(n,i),flat(e,t,n=1){throw new Error("'flat' method is not implemented yet.")},flatMap(e,t,n,i){throw new Error("'flatMap' method is not implemented yet.")},forEach:(e,t,n,i)=>e.entities.value.forEach(n,i),includes:(e,t,n,i)=>e.entities.value.includes(n,i),indexOf:(e,t,n,i)=>e.entities.value.indexOf(n,i),join(e,t,n=","){throw new Error("'join' method is not implemented yet.")},keys:(e,t)=>e.entities.value.keys(),lastIndexOf:(e,t,n,i)=>e.entities.value.lastIndexOf(n,i),map:(e,t,n,i)=>e.entities.value.map(n,i),pop(e,t){throw new Error("'pop' method is not implemented yet.")},push(e,t,...n){throw new Error("'push' method is not implemented yet.")},reduce:(e,t,n,i)=>e.entities.value.reduce(n,i),reduceRight:(e,t,n,i)=>e.entities.value.reduceRight(n,i),reverse(){throw new Error("'reverse' method is not available.")},shift(){throw new Error("'shift' method is not available.")},slice:(e,t,n,i)=>e.entities.value.slice(n,i),some:(e,t,n,i)=>e.entities.value.some(n,i),sort(){throw new Error("'sort' method is not available.")},splice(){throw new Error("'splice' method is not available.")},toLocaleString(){throw new Error("'toLocaleString' method is not implemented yet.")},toString(){throw new Error("'toString' method is not implemented yet.")},unshift(){throw new Error("'unshift' method is not implemented yet.")},values:(e,t)=>e.entities.value.values()},A="__v_skip",T="__v_raw";function N(e,{scope:t=(0,s.getCurrentScope)(),root:n,parent:i,base:l}={}){const a=t.run((()=>{const t=(0,s.effectScope)();return t.run((()=>({scope:t,definition:e,storedProperties:(0,s.shallowReactive)({}),changedProperties:(0,s.shallowReactive)({}),properties:null,children:null,details:(0,s.reactive)({}),root:n,parent:i,base:l})))})),o=new Proxy(a,$);return a.properties=Object.fromEntries((e.keys||[]).map((e=>[e,a.scope.run((()=>(0,s.computed)({get:()=>e in a.changedProperties?a.changedProperties[e]:a.storedProperties[e],set(t){a.storedProperties[e]===t?delete a.changedProperties[e]:a.changedProperties[e]=t}})))]))),a.children=Object.fromEntries((e.children||[]).map((e=>[e.navigationKey||e.entityName,F(e,{scope:a.scope,root:n??o,parent:o})]))),o[D].root=n??o,o}const $={get(e,t,n){if(t===D)return e;if(t===A)return!0;if(t===T)return!1;if("string"==typeof t){if(t in e.properties)return e.properties[t].value;if(t in e.children)return e.children[t]}return e.details[t]},set(e,t,n,i){if(t===D||t===A||t===T)return!1;if("string"==typeof t){if(t in e.properties)return e.properties[t].value=n,!0;if(t in e.children)return O(e.children[t],n)}return void 0===n?delete e.details[t]:e.details[t]=n,!0},has:(e,t)=>t in e.properties||t in e.children||t in e.details,ownKeys:e=>Object.keys(e.properties).concat(Object.keys(e.children)).concat(Object.keys(e.details)),getOwnPropertyDescriptor(e,t){if(t in e.properties||t in e.children||t in e.details)return{configurable:!0,enumerable:!0}},getPrototypeOf:e=>N.prototype};function C(e,t){const n=e?.[D],i=t?.[D];if(e instanceof N&&t instanceof N&&n.definition===i.definition){for(const e in n.storedProperties)e in i.storedProperties||delete n.storedProperties[e];for(const e in i.storedProperties)n.storedProperties[e]=i.storedProperties[e];for(const e in n.changedProperties)e in i.changedProperties||delete n.changedProperties[e];for(const e in i.changedProperties)n.changedProperties[e]=i.changedProperties[e];for(const e in i.details)n.details[e]=i.details[e];for(const e in i.children)C(n.children[e],i.children[e]);return!0}if(e instanceof F&&t instanceof F&&n.definition===i.definition){const n=e[D],i=t[D];n.storedEntities.splice(0,n.storedEntities.length).forEach((e=>e[D].scope.stop()));for(const t of i.storedEntities){const i=e.create();C(i,t),n.storedEntities.push(i)}n.newEntities.splice(0,n.newEntities.length).forEach((e=>e[D].scope.stop()));for(const t of i.newEntities){const i=e.create();C(i,t),n.newEntities.push(i)}n.deletedIndices.clear();for(const e of i.deletedIndices.values())n.deletedIndices.add(e);return!0}return!1}function I(e){const t=e?.[D];if(e instanceof N){for(const e in t.storedProperties)delete t.storedProperties[e];for(const e in t.changedProperties)delete t.changedProperties[e];for(const e in t.children)I(t.children[e]);for(const e in t.details)delete t.details[e];return!0}return e instanceof F&&(t.storedEntities.splice(0,t.storedEntities.length).forEach((e=>e[D].scope.stop())),t.newEntities.splice(0,t.newEntities.length).forEach((e=>e[D].scope.stop())),t.deletedIndices.clear(),!0)}function j(e){const t=e?.[D];if(e instanceof N){const e=Object.keys(t.changedProperties);for(const n of e)t.storedProperties[n]=t.changedProperties[n],delete t.changedProperties[n];for(const e in t.children)j(t.children[e]);return!0}if(e instanceof F){const e=Int32Array.from(t.deletedIndices).sort().reverse();for(const n of e){const[e]=t.storedEntities.splice(n,1);e[D].scope.stop()}t.deletedIndices.clear();const n=t.newEntities.splice(0,t.newEntities.length);t.storedEntities.push(...n);for(const e of t.storedEntities)j(e);return!0}return!1}function R(e,{scope:t}={}){if(!(e instanceof N))throw new Error;const n=N(e[D].definition,{scope:t,base:e});return C(n,e),n}function _(e,{depth:t,withoutDetails:n=!1,withoutChildren:i=!1}={},l=0){const a=e?.[D];if(e instanceof N){const e=[];for(const t in a.properties)a.properties[t]&&e.push([t,a.properties[t].value]);if(!n)for(const t in a.details){const n=a.details[t];null!=n&&e.push([t,JSON.parse(JSON.stringify(n))])}if(!i&&("number"!=typeof t||l<t))for(const o in a.children)e.push([o,_(a.children[o],{depth:t,withoutDetails:n,withoutChildren:i},l+1)]);return Object.fromEntries(e)}if(e instanceof F)return a.entities.value.map((e=>_(e,{depth:t,withoutDetails:n,withoutChildren:i},l)))}class W extends Error{constructor(e,t){super(`Bad HTTP response status ${e.statusText}'`),this.name="HttpError",this.status=e.status,this.statusText=e.statusText,this.body=t}}class M extends Error{constructor(e,t){super(`Bad HTTP response status '${e.statusText||e.status}'`),this.name="HttpError",this.status=e.status,this.statusText=e.statusText,this.responses=t}}function K(e={},{withContent:t=!1,withAccept:n=!1}={}){return Object.assign({},t?{"Content-Type":"application/json"}:{},n?{Accept:"application/json"}:{},e)}async function U(e){const t=e.headers.has("content-type")&&e.headers.get("content-type").includes("application/json")?await e.json():await e.text();if(e.ok)return t;throw new W(e,t)}function L(e,t={}){const n=e.reduce(((e,t)=>{if(null==t)return e;if(null==e)return t;const n=e.endsWith("/"),i=t.startsWith("/");return n&&i?e+t.substr(1):n||i?e+t:e+"/"+t}),null),i=new URL(n);for(const e in t)null!=t[e]&&i.searchParams.append(e,t[e]);return i}async function z(e,t,n){const i=L(e,t),l={headers:{...K(n,{withAccept:!0}),...n}},a=await fetch(i,l);return await U(a)}async function H(e,t,n,i){const l=L(e,n),a={method:"POST",headers:{...K(i,{withContent:!0,withAccept:!0}),...i},body:JSON.stringify(t)},o=await fetch(l,a);return await U(o)}async function G(e,t,n,i){const l=L(e,n),a={method:"PUT",headers:{...K(i,{withContent:!0,withAccept:!0}),...i},body:JSON.stringify(t)},o=await fetch(l,a);return await U(o)}async function J(e,t,n,i){const l=L(e,n),a={method:"PATCH",headers:{...K(i,{withContent:!0,withAccept:!0}),...i},body:JSON.stringify(t)},o=await fetch(l,a);return await U(o)}async function Z(e,t,n){const i=L(e,t),l={method:"DELETE",headers:{...K(n,{withAccept:!0}),...n}},a=await fetch(i,l);return await U(a)}async function Y(e,t,n){const i=e+(e.endsWith("/")?"$batch":"/$batch"),l=await fetch(i,{method:"POST",headers:K(null,{withContent:!0,withAccept:!0}),body:JSON.stringify({requests:t.map((e=>({...e,headers:{...K(n,{withContent:!0,withAccept:!0}),...e.headers||{}}})))})}),{responses:a}=await U(l),o=a.find((e=>!(e.status>=200&&e.status<300)));if(o)throw new M(o,a);return a}async function Q(e,t,n,i){const l=await async function(e,t,n,i){const l=await z([t,`${e.entityName}(${i})`],{$select:te(e),$expand:ne(e)},n);return delete l["@odata.context"],ie(e,l),l}(e[D].definition,t,n,i);return I(e),O(e,l),j(e),l}function X(e,t,n,i){const l=(0,s.ref)(!1),a=N(e);return Q(a).then((()=>{l.value=!0})),{entity:a,loaded:l}}async function ee(e,t,n,i){const l=await async function(e,t,n,i){const l=await z([t,e.entityName],{$select:te(e),$expand:ne(e),...i},n);return delete l["@odata.context"],ie(e,l),l}(e[D].definition,t,n,i);return I(e),O(e,l.value),j(e),l}function te(e){if(Array.isArray(e.keys)&&e.keys.length>0)return Array.isArray(e.ignoredKeys)&&e.ignoredKeys.length>0?e.keys.filter((t=>!e.ignoredKeys.includes(t))).join():void 0}function ne(e){const t=[],n=[...e.children||[],...e.details||[]];for(const e of n){const n=e.navigationKey||e.entityName,i=[],l=te(e);l&&i.push(`$select=${l}`),(e.children?.length>0||e.details?.length>0)&&i.push(`$expand=${ne(e)}`),i.length>0?t.push(`${n}(${i.join(";")})`):t.push(n)}return t.length>0?t.join():void 0}function ie(e,t){if(Array.isArray(e.dateKeys))for(const n of e.dateKeys)"string"==typeof t[n]&&(t[n]=new Date(t[n]));if(e.children)for(const n of e.children){const e=n.navigationKey||n.entityName;if(Array.isArray(t[e]))for(const i of t[e])ie(n,i);else"object"==typeof t[e]&&ie(n,t[e])}}async function le(e,t,n){if(e instanceof N){const i=ae(e);if(i.length>0){!function(e,t){for(const n of t)if(n.body){const[,t]=n.id.match(/^(.*)\/(?:create|update|delete)$/),i=oe(e,t),l={...n.body,...i[D].details};ie(e[D].definition,l),O(i,l)}}(e,await Y(t,i,n)),j(e);const l=e[D];if(l.parent){const t=l.parent[D],n=t.newEntities.indexOf(e);n>-1&&(t.newEntities.splice(n,1),t.storedEntities.push(e))}l.base&&C(l.base,e)}return!0}return!1}function ae(e,t=""){const n=e[D],{entityName:i,primaryKey:l}=n.definition;if(e instanceof N){const a=e[l];if(null==a)return[{atomicityGroup:"entitySave",id:`${t}/create`,method:"POST",url:i,body:_(e,{withoutDetails:!0})}];{const e=[];Object.keys(n.changedProperties).length>0&&e.push({atomicityGroup:"entitySave",id:`${t}/update`,method:"PATCH",url:`${i}(${a})`,body:{...n.changedProperties}});for(const i in n.children)e.push(...ae(n.children[i],`${t}/${i}`));return e}}if(e instanceof F){const e=[];for(const a of n.deletedIndices){const o=n.storedEntities[a][l];e.push({atomicityGroup:"entitySave",id:`${t}(${o})/delete`,method:"DELETE",url:`${i}(${o})`})}for(let i=0;i<n.entities.value.length;i+=1)e.push(...ae(n.entities.value[i],`${t}[${i}]`));return e}return[]}function oe(e,t){if(!t)return e;const[n,i,l]=t.match(/^\/([^[]+)\[(\d+)]/);return oe(e[i][l],t.substring(n.length))}async function re(e,t,n){if(e instanceof N){const i=e[D];if(i.scope.stop(),i.base)return re(i.base,t,n);const{entityName:l,primaryKey:a}=i.definition,o=e[a];if(null!=o){if(await Z([t,null,`${l}(${o})`],null,n),i.parent){const t=i.parent[D],n=t.storedEntities.indexOf(e);if(n>-1){t.storedEntities.splice(n,1),t.deletedIndices.delete(n);const e=Int32Array.from(t.deletedIndices).filter((e=>e>n)).sort();for(const n of e)t.deletedIndices.delete(n),t.deletedIndices.add(n-1)}const l=t.newEntities.indexOf(e);l>-1&&t.newEntities.splice(l,1)}return!0}}return!1}function de(e,{includeCollections:t=!1}={}){let n=e?.[D]?.parent;if(!t)for(;n instanceof F;)n=n?.[D]?.parent;return n}function se(e){return e?.[D]?.base}function ue(e){if(e instanceof N)return e[e[D].definition.primaryKey]}function ce(e){if(e instanceof N||e instanceof F)return e[D].definition}function pe(e,{depth:t,withoutChildren:n=!1}={},i=0){const l=e[D];if(e instanceof N){if(Object.keys(l.changedProperties).length>0)return!0;if(!n&&("number"!=typeof t||i<t))for(const e in l.children)if(pe(l.children[e],{depth:t,withoutChildren:n},i+1))return!0}else if(e instanceof F){if(l.newEntities.length>0||l.deletedIndices.size>0)return!0;for(const e of l.entities.value)if(pe(e,{depth:t,withoutChildren:n},i))return!0}return!1}function fe(e,t){const n=(0,s.ref)("");return(0,s.watchEffect)((()=>{const i=(0,s.unref)(e),l=Array.isArray(i)?i.reduce(((e,t)=>{const n=(0,s.unref)(e),i=(0,s.unref)(t);if(null==i)return n;const l=n.endsWith("/"),a=i.startsWith("/");return l&&a?n+i.substr(1):l||a?n+i:n+"/"+i})):i,a=new URL(l),o=(0,s.unref)(t);for(const e in o)null!=(0,s.unref)(o[e])&&a.searchParams.append(e,o[e]);a.toString()!==n.value.toString()&&(n.value=a)})),{url:n}}function me(e,t,n,i){const l=(0,s.shallowRef)(null),a=(0,s.shallowRef)(!1),o=(0,s.shallowRef)(null),r=[];function d(e){for(const t of r)t(e)}const{url:u}=fe(e,t),c=(0,s.computed)((()=>{const e={Accept:"application/json"},t=(0,s.unref)(n);for(const n in t)e[n]=(0,s.unref)(t[n]);return e}));async function p(){l.value=null,o.value=null,a.value=!0;let e=null;try{e=await fetch(u.value,{headers:c.value});const t=e.headers.has("content-type")&&e.headers.get("content-type").includes("application/json")?await e.json():await e.text();l.value=e.status,e.ok?o.value=t:d({type:"badResponse",status:e.status,statusText:e.statusText,body:t})}catch(e){d({type:"exception",name:e.name,message:e.message})}a.value=!1}return(0,s.watch)([u,c],(()=>!(0,s.unref)((0,s.unref)(i)?.manual)&&p()),{immediate:!0}),{status:l,isLoading:a,data:o,load:p,onError:function(e){r.push(e)}}}function ye(e,t,n,i,l,a){const o=(0,s.unref)(n),r=(0,s.unref)(i),d=(0,s.unref)(l),u=(0,s.reactive)({});(0,s.watchEffect)((()=>{const e=`${o},${r}`;u.$select!==e&&(u.$select=e),u.$orderby!==r&&(u.$orderby=r);for(const e in d){const t=(0,s.unref)(d[e]);u[e]!==t&&(u[e]=t)}for(const e in u)["$orderby","$select",...Object.keys(d)].includes(e)||delete u[e]}));const{status:c,isLoading:p,data:f,error:m,load:y}=me([e,t],u,a);return{status:c,isLoading:p,options:(0,s.computed)((()=>(f.value?.value||[]).map((e=>({value:e[o],text:e[r]}))))),error:m,load:y}}function ve(){const e=(0,s.reactive)(new Map),t=(0,s.reactive)(new Map),n=[],i=(0,s.computed)((()=>Object.fromEntries(Array.from(e.entries()).map((([e,{value:t}])=>[e,(0,s.unref)(t)])))));return{fields:(0,s.computed)((()=>Array.from(e.keys()))),validations:(0,s.computed)((()=>Array.from(t.keys()))),values:i,createField:function(t,l,{rules:a,skip:o}={}){const r=(0,s.ref)(null);async function d(...e){r.value=null;const t=(0,s.unref)(a);if(t&&!(0,s.unref)(o))for(const n of t){const t=n((0,s.unref)(l),(0,s.unref)(i),...e),a=t instanceof Promise?await t:t;if(a&&"string"==typeof a)return r.value=a,!1}return!0}function u(){r.value=null}return e.set(t,{value:l,validate:d,clean:u}),(0,s.watch)(l,((e,i)=>{r.value=null,function(e){for(const t of n)t(e)}({name:t,value:e,oldValue:i})})),{errorMessage:(0,s.isRef)(o)?(0,s.computed)((()=>o.value?null:(0,s.unref)(r))):r,destroy:function(){e.delete(t)},validate:d,clean:u}},createValidation:function(e,{rules:n,skip:l}={}){const a=(0,s.ref)(null);async function o(...e){a.value=null;const t=(0,s.unref)(n);if(t&&!(0,s.unref)(l))for(const n of t){const t=n((0,s.unref)(i),...e),l=t instanceof Promise?await t:t;if(l&&"string"==typeof l)return a.value=l,!1}return!0}function r(){a.value=null}return t.set(e,{validate:o,clean:r}),{errorMessage:(0,s.isRef)(l)?(0,s.computed)((()=>l.value?null:(0,s.unref)(a))):a,destroy:function(){t.delete(e)},validate:o,clean:r}},validate:async function(...n){let i=!0;for(const{validate:t}of e.values())i=await t(...n)&&i;for(const{validate:e}of t.values())i=await e(...n)&&i;return i},clean:function(){for(const{clean:t}of e.values())t();for(const{clean:e}of t.values())e()},onChange:function(e){n.push(e)}}}function ge(e){return e instanceof Date?new Date(e.getTime()):Array.isArray(e)?e.map((e=>ge(e))):e&&"object"==typeof e?Object.setPrototypeOf(Object.fromEntries(function(e){return Object.entries(e).concat(Object.getOwnPropertySymbols(e).map((t=>[t,e[t]])))}(e).map((([e,t])=>[e,ge(t)]))),Object.getPrototypeOf(e)):e}const he={FieldCombo:c,FieldComboAsync:p,FieldDate:f,FieldDropdown:m,FieldNumber:y,FieldNumberSpin:v,FieldTag:g,FieldText:h,StackDraggable:k},be={install:function(e,{prefix:t="llesca"}={}){for(const t in he){const n=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();e.component("llesca-"+n,he[t])}},Llesca:he,version:"0.4.12",...t,...a,...o,...n,...r,odata:e,object:d}})(),l.default})()));